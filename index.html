<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Strong Tooth Pro</title>
    <script src="https://telegram.org"></script>
    <style>
        :root {
            --bg: #e0eafc;
            --accent: #3498db;
            --tooth: #ffffff;
        }

        body {
            margin: 0; padding: 0; background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 100%);
            font-family: 'Segoe UI', Roboto, sans-serif;
            height: 100vh; display: flex; flex-direction: column; align-items: center;
            overflow: hidden; touch-action: none;
        }

        /* –°—á–µ—Ç—á–∏–∫ */
        .score-container {
            margin-top: 50px; text-align: center; z-index: 10;
        }
        .score-num { font-size: 64px; font-weight: 900; color: #2c3e50; text-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        
        /* –ò–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ */
        .world { flex: 1; width: 100%; display: flex; justify-content: center; align-items: center; position: relative; }

        /* –ü–ï–†–°–û–ù–ê–ñ */
        .hero-group { position: relative; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        
        .tooth-main {
            width: 180px; height: 190px; background: var(--tooth);
            border: 6px solid #2c3e50; border-radius: 50px 50px 70px 70px;
            position: relative; z-index: 5; box-shadow: inset -12px -12px 0 #f0f0f0;
            transition: transform 0.1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* –®—Ç–∞–Ω–≥–∞ */
        .barbell-wrap {
            position: absolute; top: -40px; z-index: 10;
            transition: transform 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.5);
        }
        .barbell-rod { width: 300px; height: 12px; background: #333; border-radius: 6px; position: relative; }
        .weight-disk {
            position: absolute; background: #222; width: 20px; height: 70px;
            border-radius: 4px; top: -29px; box-shadow: 3px 0 5px rgba(0,0,0,0.3);
        }
        .disk-l { left: -10px; } .disk-l2 { left: 15px; height: 50px; top: -19px; }
        .disk-r { right: -10px; } .disk-r2 { right: 15px; height: 50px; top: -19px; }

        /* –õ–∏—Ü–æ */
        .eyes { position: absolute; top: 60px; width: 100%; display: flex; justify-content: center; gap: 40px; }
        .eye-dot { width: 14px; height: 20px; background: #2c3e50; border-radius: 50%; animation: blink 3s infinite; }
        @keyframes blink { 0%, 90%, 100% { transform: scaleY(1); } 95% { transform: scaleY(0); } }

        /* –ú—ã—à—Ü—ã */
        .bicep {
            position: absolute; width: 55px; height: 55px; background: #fff;
            border: 5px solid #2c3e50; border-radius: 50%; top: 80px;
            opacity: 0; transform: scale(0); transition: 0.4s; z-index: 1;
        }
        .b-l { left: -35px; } .b-r { right: -35px; }
        .grow .bicep { opacity: 1; transform: scale(1); }

        /* –≠–§–§–ï–ö–¢ –î–í–ò–ñ–ï–ù–ò–Ø */
        .lifting .barbell-wrap { transform: translateY(-60px) rotate(2deg); }
        .lifting .tooth-main { transform: scaleX(1.1) scaleY(0.85); }

        /* –ß–∞—Å—Ç–∏—Ü—ã */
        .particle {
            position: absolute; pointer-events: none; font-size: 20px;
            animation: particleMove 0.7s ease-out forwards;
        }
        @keyframes particleMove {
            0% { transform: translate(0, 0) rotate(0deg); opacity: 1; }
            100% { transform: translate(var(--dx), var(--dy)) rotate(360deg); opacity: 0; }
        }

        /* –¢–û–ü –í–ö–õ–ê–î–ö–ê */
        .btn-top {
            margin-bottom: 40px; padding: 16px 40px; border-radius: 20px;
            border: none; background: #2c3e50; color: white; font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); z-index: 20;
        }

        #modal-top {
            position: fixed; bottom: -100%; left: 0; width: 100%; height: 80%;
            background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(15px);
            border-radius: 30px 30px 0 0; z-index: 100; transition: 0.4s;
            display: flex; flex-direction: column; box-shadow: 0 -10px 30px rgba(0,0,0,0.1);
        }
        #modal-top.open { bottom: 0; }
        .top-nav { padding: 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; }
        .top-content { flex: 1; overflow-y: auto; padding: 15px; }
        .user-row { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid #eee; }
        .me { background: rgba(52, 152, 219, 0.1); border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="score-container">
        <div class="score-num" id="score">0</div>
        <div style="color: #34495e; font-weight: bold; opacity: 0.6;">ü¶æ –ì–ê–ù–¢–ï–õ–ò</div>
    </div>

    <div class="world" id="tap-area">
        <div class="hero-group" id="hero">
            <div class="barbell-wrap">
                <div class="barbell-rod">
                    <div class="weight-disk disk-l"></div><div class="weight-disk disk-l2"></div>
                    <div class="weight-disk disk-r"></div><div class="weight-disk disk-r2"></div>
                </div>
            </div>
            <div class="tooth-main">
                <div class="eyes">
                    <div class="eye-dot"></div>
                    <div class="eye-dot"></div>
                </div>
            </div>
            <div class="bicep b-l"></div>
            <div class="bicep b-r"></div>
        </div>
    </div>

    <button class="btn-top" onclick="toggleTop(true)">üèÜ –†–ï–ô–¢–ò–ù–ì –¢–û–ü-150</button>

    <div id="modal-top">
        <div class="top-nav">
            <b style="font-size: 20px;">–¢–æ–ø –ê—Ç–ª–µ—Ç–æ–≤ 2026</b>
            <button onclick="toggleTop(false)" style="border:none; background:none; font-size:24px;">‚úï</button>
        </div>
        <div class="top-content" id="top-list"></div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let score = parseInt(localStorage.getItem('tooth_clicks_v2')) || 0;
        const scoreEl = document.getElementById('score');
        const hero = document.getElementById('hero');

        function updateState() {
            scoreEl.innerText = score;
            if (score >= 50) hero.classList.add('grow');
        }

        function spawnParticle(x, y) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = Math.random() > 0.5 ? 'ü¶æ' : 'ü¶∑';
            p.style.left = x + 'px';
            p.style.top = y + 'px';
            p.style.setProperty('--dx', (Math.random() - 0.5) * 200 + 'px');
            p.style.setProperty('--dy', (Math.random() - 0.5) * 200 + 'px');
            document.body.appendChild(p);
            setTimeout(() => p.remove(), 700);
        }

        function handleTap(e) {
            score++;
            updateState();
            localStorage.setItem('tooth_clicks_v2', score);

            // –ê–Ω–∏–º–∞—Ü–∏—è
            hero.classList.remove('lifting');
            void hero.offsetWidth;
            hero.classList.add('lifting');

            // –ß–∞—Å—Ç–∏—Ü—ã
            const touch = e.touches ? e.touches[0] : e;
            spawnParticle(touch.clientX, touch.clientY);

            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        }

        document.getElementById('tap-area').addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleTap(e);
        });

        function toggleTop(show) {
            const modal = document.getElementById('modal-top');
            if (show) {
                modal.classList.add('open');
                renderTop();
            } else {
                modal.classList.remove('open');
            }
        }

        function renderTop() {
            const list = document.getElementById('top-list');
            list.innerHTML = '';
            let players = [];
            for(let i=0; i<149; i++) {
                players.push({name: "–ê—Ç–ª–µ—Ç #"+(i+100), score: Math.floor(Math.random()*2000)});
            }
            players.push({name: "–í—ã (–í—ã –ø—Ä–æ—Ñ–∏)", score: score, isMe: true});
            players.sort((a,b) => b.score - a.score);

            players.slice(0, 150).forEach((p, i) => {
                const row = document.createElement('div');
                row.className = `user-row ${p.isMe ? 'me' : ''}`;
                row.innerHTML = `<span>${i+1}. ${p.name}</span><span>${p.score}</span>`;
                list.appendChild(row);
            });
        }

        updateState();
    </script>
</body>
</html>
