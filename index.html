import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.filters import CommandStart
from aiogram.utils.keyboard import InlineKeyboardBuilder

# –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω
BOT_TOKEN = "–í–ê–®_–¢–û–ö–ï–ù"
# URL –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è —Ç–µ—Å—Ç–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±–æ–π)
WEB_APP_URL = "https://your-game-app.com" 

bot = Bot(token=BOT_TOKEN)
dp = Dispatcher()

@dp.message(CommandStart())
async def start(message: types.Message):
    builder = InlineKeyboardBuilder()
    # –ö–Ω–æ–ø–∫–∞ Web App ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–≥—Ä –≤ TG
    builder.row(types.InlineKeyboardButton(
        text="üéÆ –ò–≥—Ä–∞—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å –±–æ–Ω—É—Å", 
        web_app=types.WebAppInfo(url=WEB_APP_URL)
    ))
    
    await message.answer(
        "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —É—á–µ–±–Ω—ã–π –±–æ—Ç!\n"
        "–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã.",
        reply_markup=builder.as_markup()
    )

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ Web App –º–æ–∂–µ—Ç –ø—Ä–∏—Å–ª–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ –≤ –±–æ—Ç
@dp.message(lambda message: message.web_app_data is not None)
async def get_web_app_data(message: types.Message):
    data = message.web_app_data.data
    await message.answer(f"–ë–æ—Ç –ø–æ–ª—É—á–∏–ª –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: {data}\n"
                         f"–¢–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–µ–≥–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–æ–≤.")

async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())
