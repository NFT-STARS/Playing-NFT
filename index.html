<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Zub Atlet 2026</title>
    <script src="https://telegram.org"></script>
    <style>
        body {
            margin: 0; padding: 0; background: #e0eafc;
            font-family: sans-serif; height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            overflow: hidden; touch-action: none;
        }

        .score-box { margin-top: 50px; text-align: center; }
        .score-num { font-size: 60px; font-weight: 900; color: #2c3e50; transition: transform 0.1s; }

        .game-zone {
            flex: 1; width: 100%; display: flex; justify-content: center;
            align-items: center; position: relative;
        }

        /* Обертка для зуба и штанги */
        #hero-wrapper {
            position: relative;
            transition: transform 0.1s ease-out;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Штанга */
        .barbell {
            width: 280px; height: 14px; background: #333;
            border-radius: 7px; position: absolute; top: -40px;
            transition: transform 0.1s ease-out;
            display: flex; justify-content: space-between;
        }
        .weight { width: 30px; height: 70px; background: #222; border-radius: 4px; margin-top: -28px; }

        /* Зуб */
        .tooth {
            width: 160px; height: 180px; background: white;
            border: 6px solid #2c3e50; border-radius: 40px 40px 60px 60px;
            box-shadow: inset -10px -10px 0 #f0f0f0;
        }

        /* АНИМАЦИИ ПРИ НАЖАТИИ */
        .lifting #hero-wrapper { transform: scale(0.9) translateY(10px); }
        .lifting .barbell { transform: translateY(-50px); }
        .lifting .score-num { transform: scale(1.1); }

        .btn-top {
            margin-bottom: 40px; padding: 15px 40px;
            background: #2c3e50; color: white; border: none; border-radius: 20px;
            font-weight: bold; font-size: 18px;
        }
    </style>
</head>
<body id="main-body">

    <div class="score-box">
        <div class="score-num" id="score-val">0</div>
        <div style="opacity: 0.5; font-weight: bold;">ГАНТЕЛИ</div>
    </div>

    <div class="game-zone" id="tap-area">
        <div id="hero-wrapper">
            <div class="barbell" id="barbell-el">
                <div class="weight"></div>
                <div class="weight"></div>
            </div>
            <div class="tooth"></div>
        </div>
    </div>

    <button class="btn-top" onclick="alert('У тебя уже ' + score + ' гантелей!')">СЧЕТ</button>

    <script>
        // Инициализация Telegram
        const tg = window.Telegram.WebApp;
        tg.expand();

        // Переменные
        let score = parseInt(localStorage.getItem('zub_score_2026')) || 0;
        const scoreDisplay = document.getElementById('score-val');
        const tapArea = document.getElementById('tap-area');
        const body = document.getElementById('main-body');

        // Устанавливаем начальный счет
        scoreDisplay.innerText = score;

        // ГЛАВНАЯ ФУНКЦИЯ НАЖАТИЯ
        function processTap(e) {
            // Предотвращаем стандартное поведение браузера
            if (e.cancelable) e.preventDefault();

            // 1. Увеличиваем счет
            score++;
            scoreDisplay.innerText = score;
            localStorage.setItem('zub_score_2026', score);

            // 2. Запускаем анимацию
            body.classList.remove('lifting');
            void body.offsetWidth; // Магия для перезапуска CSS анимации
            body.classList.add('lifting');
            
            // Убираем класс анимации через 100мс
            setTimeout(() => {
                body.classList.remove('lifting');
            }, 100);

            // 3. Вибрация
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }
        }

        // Слушаем и касания (для телефонов), и клики (для ПК)
        tapArea.addEventListener('touchstart', processTap, { passive: false });
        tapArea.addEventListener('mousedown', processTap);

    </script>
</body>
</html>
