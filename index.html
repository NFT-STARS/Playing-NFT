<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NFT STARS - Levels</title>
    <script src="https://telegram.org"></script>
    <style>
        :root { --bg: #0b0e11; --accent: #fcd535; --card: #1e2329; }
        body { font-family: sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; overflow: hidden; }

        /* –û–±—â–∏–π —Å—Ç–∏–ª—å –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        .screen {
            display: none; /* –í—Å–µ —ç–∫—Ä–∞–Ω—ã —Å–∫—Ä—ã—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            position: absolute;
        }

        /* –ê–∫—Ç–∏–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω */
        .active { display: flex; }

        /* –≠–ö–†–ê–ù 1: –ì–õ–ê–í–ù–´–ô */
        .balance-card { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid var(--accent); text-align: center; width: 70%; }
        .gift-big { font-size: 100px; margin: 40px 0; }

        /* –≠–ö–†–ê–ù 2: –†–£–õ–ï–¢–ö–ê */
        .roulette-wrap { width: 100%; height: 100px; overflow: hidden; position: relative; background: rgba(255,255,255,0.05); border: 2px solid var(--accent); }
        .track { display: flex; position: absolute; left: 50%; height: 100%; transition: transform 3s cubic-bezier(0.1, 0, 0.1, 1); }
        .slot { min-width: 100px; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 40px; }

        /* –≠–ö–†–ê–ù 3: –†–ï–ó–£–õ–¨–¢–ê–¢ */
        .win-box { background: var(--card); padding: 40px; border-radius: 30px; text-align: center; border: 2px solid var(--accent); }

        button { background: var(--accent); color: black; border: none; padding: 18px 30px; border-radius: 15px; font-weight: bold; font-size: 18px; width: 80%; cursor: pointer; }
    </style>
</head>
<body>

    <!-- –≠–ö–†–ê–ù 1: –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div id="screen-main" class="screen active">
        <div class="balance-card">
            <div style="font-size: 12px; opacity: 0.6;">–í–ê–®–ò –ó–í–ï–ó–î–´</div>
            <div style="font-size: 32px;">‚≠ê <span id="bal-val">500</span></div>
        </div>
        <div class="gift-big">üéÅ</div>
        <button onclick="startSpin()">–ö–†–£–¢–ò–¢–¨ –ó–ê 25 ‚≠ê</button>
    </div>

    <!-- –≠–ö–†–ê–ù 2: –ê–ù–ò–ú–ê–¶–ò–Ø (–†–£–õ–ï–¢–ö–ê) -->
    <div id="screen-spin" class="screen">
        <h2 style="color: var(--accent);">–£–î–ê–ß–ò...</h2>
        <div class="roulette-wrap">
            <div id="track" class="track"></div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 3: –†–ï–ó–£–õ–¨–¢–ê–¢ (–í–´–ü–ê–î–ï–ù–ò–ï) -->
    <div id="screen-win" class="screen">
        <div class="win-box">
            <div style="color: var(--accent); margin-bottom: 10px;">–í–´ –í–´–ò–ì–†–ê–õ–ò!</div>
            <div id="win-icon" style="font-size: 80px; margin-bottom: 15px;">üíé</div>
            <div id="win-name" style="font-size: 24px; font-weight: bold; margin-bottom: 20px;">Rare Gift</div>
            <button onclick="backToMain()">–ó–ê–ë–†–ê–¢–¨</button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let stars = 500;
        const gifts = [{i:'üíé', n:'–ö—Ä–∏—Å—Ç–∞–ª–ª'}, {i:'üöÄ', n:'–†–∞–∫–µ—Ç–∞'}, {i:'üëë', n:'–ö–æ—Ä–æ–Ω–∞'}, {i:'üèÜ', n:'–ö—É–±–æ–∫'}];

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
        }

        // –®–ê–ì 1 -> –®–ê–ì 2
        function startSpin() {
            if (stars < 25) return tg.showAlert("–ú–∞–ª–æ –∑–≤–µ–∑–¥!");
            stars -= 25;
            document.getElementById('bal-val').innerText = stars;

            // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ä—É–ª–µ—Ç–∫–∏
            const track = document.getElementById('track');
            track.innerHTML = '';
            for(let i=0; i<40; i++) {
                const item = gifts[Math.floor(Math.random()*gifts.length)];
                track.innerHTML += `<div class="slot">${item.i}</div>`;
            }
            track.style.transform = 'translateX(0)';

            // –ü–ï–†–ï–•–û–î –ö –≠–ö–†–ê–ù–£ –°–ü–ò–ù–ê
            showScreen('screen-spin');
            tg.HapticFeedback.impactOccurred('medium');

            // –ó–∞–ø—É—Å–∫ –≤—Ä–∞—â–µ–Ω–∏—è
            const winItem = gifts[Math.floor(Math.random()*gifts.length)];
            track.children[35].innerHTML = winItem.i; // 35-–π —Å–ª–æ—Ç - —ç—Ç–æ –ø–æ–±–µ–¥–∞

            setTimeout(() => {
                track.style.transform = 'translateX(-3500px)'; // –°–¥–≤–∏–≥ –ª–µ–Ω—Ç—ã
            }, 100);

            // –®–ê–ì 2 -> –®–ê–ì 3 (—á–µ—Ä–µ–∑ 3.5 —Å–µ–∫—É–Ω–¥—ã)
            setTimeout(() => {
                showResult(winItem);
            }, 3500);
        }

        function showResult(item) {
            document.getElementById('win-icon').innerText = item.i;
            document.getElementById('win-name').innerText = item.n;
            
            // –ü–ï–†–ï–•–û–î –ö –≠–ö–†–ê–ù–£ –í–´–ò–ì–†–´–®–ê
            showScreen('screen-win');
            tg.HapticFeedback.notificationOccurred('success');
        }

        // –®–ê–ì 3 -> –®–ê–ì 1
        function backToMain() {
            showScreen('screen-main');
        }
    </script>
</body>
</html>
