<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tooth Lift Pro</title>
    <script src="https://telegram.org"></script>
    <style>
        :root {
            --main-bg: #f0f4f8;
            --accent-color: #3498db;
            --tooth-size: 180px;
        }

        body {
            margin: 0;
            background-color: var(--main-bg);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            user-select: none;
            touch-action: manipulation; /* –£–±–∏—Ä–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –∫–ª–∏–∫–∞ –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö */
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—á–∫–æ–≤ —Å –ø–ª–∞–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π —Ü–∏—Ñ—Ä */
        .score-board {
            margin-top: 40px;
            font-size: 40px;
            font-weight: 900;
            color: #2c3e50;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* –ü–ª–æ—â–∞–¥–∫–∞ –¥–ª—è –∏–≥—Ä—ã */
        .game-container {
            position: relative;
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        /* –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –ó—É–± + –®—Ç–∞–Ω–≥–∞ */
        .athlete-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.05s;
        }

        /* –®—Ç–∞–Ω–≥–∞ */
        .barbell {
            width: 260px;
            height: 15px;
            background: #333;
            border-radius: 10px;
            position: absolute;
            top: 20px;
            z-index: 2;
            transition: transform 0.1s ease-out;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .barbell::before, .barbell::after {
            content: '';
            position: absolute;
            width: 40px; height: 40px;
            background: #222; border-radius: 5px;
            top: -12px;
        }
        .barbell::before { left: -10px; }
        .barbell::after { right: -10px; }

        /* –ó—É–± */
        .tooth {
            width: var(--tooth-size);
            height: var(--tooth-size);
            background: url('https://cdn-icons-png.flaticon.com') no-repeat center/contain;
            z-index: 1;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ —Ç–∞–ø–µ */
        .lift-anim .barbell {
            transform: translateY(-50px); /* –®—Ç–∞–Ω–≥–∞ –∏–¥–µ—Ç –≤–≤–µ—Ä—Ö */
        }
        .lift-anim .tooth {
            transform: scaleY(0.9) translateY(10px); /* –ó—É–± –ø—Ä–∏—Å–µ–¥–∞–µ—Ç */
        }

        /* –ö–Ω–æ–ø–∫–∞ –¢–û–ü */
        .nav-btn {
            margin-bottom: 40px;
            background: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            color: var(--accent-color);
        }

        /* –í—Å–ø–ª—ã–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç +1 */
        .tap-effect {
            position: fixed;
            pointer-events: none;
            color: #27ae60;
            font-weight: bold;
            font-size: 24px;
            animation: flyUp 0.6s ease-out forwards;
            z-index: 100;
        }

        @keyframes flyUp {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-100px); opacity: 0; }
        }
    </style>
</head>
<body>

    <div class="score-board">
        <span id="score">0</span> ü¶æ
    </div>

    <div class="game-container" id="tap-zone">
        <div class="athlete-wrapper" id="athlete">
            <div class="barbell"></div>
            <div class="tooth"></div>
        </div>
    </div>

    <button class="nav-btn" onclick="showLeaderboard()">üèÜ –†–ï–ô–¢–ò–ù–ì –¢–û–ü-150</button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        let score = parseInt(localStorage.getItem('user_score')) || 0;
        const scoreEl = document.getElementById('score');
        const athlete = document.getElementById('athlete');
        const tapZone = document.getElementById('tap-zone');

        scoreEl.innerText = score;

        // –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ç–∞–ø–æ–≤
        tapZone.addEventListener('touchstart', (e) => {
            e.preventDefault(); // –£–±–∏—Ä–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∂–µ—Å—Ç—ã
            
            // 1. –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç
            score++;
            scoreEl.innerText = score;
            localStorage.setItem('user_score', score);

            // 2. –í–∏–∑—É–∞–ª—å–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
            athlete.classList.remove('lift-anim');
            void athlete.offsetWidth; // –ú–∞–≥–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
            athlete.classList.add('lift-anim');

            // 3. –í–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫ Telegram
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('light');
            }

            // 4. –¢–µ–∫—Å—Ç +1 –≤ –º–µ—Å—Ç–µ –∫–ª–∏–∫–∞
            const touch = e.touches[0];
            showTapEffect(touch.clientX, touch.clientY);
        });

        function showTapEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'tap-effect';
            effect.innerText = '+1';
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            document.body.appendChild(effect);
            setTimeout(() => effect.remove(), 600);
        }

        function showLeaderboard() {
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç–æ–ø–∞ (–Ω–∞–ø–∏—à–µ–º –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ)
            tg.showAlert("–†–µ–π—Ç–∏–Ω–≥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...");
        }
    </script>
</body>
</html>
